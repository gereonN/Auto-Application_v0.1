<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Workflow</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        .mermaid { text-align: left; }
    </style>
</head>
<body>
    <h2>Job Application Workflow - Business, Application & Technology Layer</h2>
    <div class="mermaid">
        graph TD;
        
        %% Business Layer
        subgraph "Business Layer" 
            A[User: Job Seeker] -->|Input: Job Preferences| B{Start Application Process}
            B -->|Trigger| C[Fetch Job Listings ðŸ“Œ] 
            B -->|Trigger| D[Analyze Resume ðŸ“„] 
            B -->|Trigger| E[Generate Cover Letter âœ‰ï¸] 
            C -->|Data Retrieved| F(Job Listings Available ðŸ“„)
            D -->|Data Processed| G(Optimized Resume âœ…)
            E -->|Generated| H(Completed Cover Letter ðŸ“©)
            
            %% Entscheidungs-Gateway: User prÃ¼ft die erstellten Dokumente
            F -->|Proceed| I{User Review & Approval ðŸ”}
            G -->|Proceed| I
            H -->|Proceed| I
            
            I -->|Approved| J[Submit Application ðŸš€]
            I -->|Changes Needed| D
            I -->|Regenerate Cover Letter| E
            I -->|Save Approved Documents| P
            J -->|Sent| K{Job Portals ðŸ“‘}
            
            %% Markierung als Endpunkt
            K -->|Application Completed âœ…| End[ðŸŽ¯ Process Complete]
        end

        %% Verbindung Business â†’ Application Layer
        A -.->|User Input| L
        B -.->|Trigger Automations| L
        I -.->|User Decision| P

        %% Application Layer
        subgraph "Application Layer"
            L[Make.com Workflow ðŸ”„] -->|Calls API| M(JobCopilot API ðŸ”Ž)
            L -->|Extracts Data| N[LinkedIn API / Scrapfly ðŸ“]
            L -->|AI Processing| O[OpenAI API ðŸ¤–]
            L -->|Stores Documents| P[Google Drive / PostgreSQL ðŸ’¾]

            %% Entscheidungs-Gateway fÃ¼r Speichern oder Neuberechnung
            P -->|Provide Data| Q{Data Validation ðŸ”Ž}
            Q -->|Valid| I
            Q -->|Reprocess Resume| N

            %% Make.comâ€™s Rolle deutlicher markieren
            L -- Manages Automations & Data Flow --|Central Orchestration| P
        end

        %% Verbindung Application â†’ Technology Layer
        L -.->|Manages Processes| S
        P -.->|Stores Files| W

        %% Technology Layer
        subgraph "Technology Layer"
            R[Cloud Server â˜ï¸] -->|Runs Services| S[Make.com ðŸ–¥ï¸]
            S -->|Handles API Calls| T[JobCopilot API ðŸ”Ž]
            S -->|Processes AI Requests| U[OpenAI API ðŸ¤–]
            S -->|Manages Data Storage| V[PostgreSQL Database ðŸ—„ï¸]
            S -->|Stores Files| W[Google Drive ðŸ“‚]
        end

        %% Legende
        subgraph "Legend"
            X[ðŸ”„ Workflow Automation]
            Y[ðŸ“Œ Process Step]
            Z[ðŸ“„ Data Exchange]
            AA[âœ… Decision Point]
            AB[ðŸš€ Output]
            AC[ðŸ”Ž API Call]
            AD[Gateway]
        end
    </div>
</body>
</html>
